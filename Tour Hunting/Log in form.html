<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TourHunting</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="loginstyles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
</head>

<body>
     <section class="header">
        <div class="container">
            <img src="Images/Logo.png">
        </div>
     </section>
    <div class="login-container">
        <h2>Login</h2>
   
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>

            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>

            <button type="submit" onclick="loginUser()">Login</button>
   
    </div>

    <script>
        // document.addEventListener("DOMContentLoaded", function () {
         
        // });
            // Function to handle the registration form submission
        async function loginUser() {
                const email = document.getElementById("username").value;
                 const pass = document.getElementById("password").value;
        
        
          const formData = {
            email: email,
            password: pass,
        
          };
        
          try {
            const response = await fetch("http://localhost:3000/login", {
              method: "POST",
              headers: {
                "Content-Type": "application/json"
              },
              body: JSON.stringify(formData)
            });
        
            if (response.ok) {
              const data = await response.json();
              const { authToken,userRole } = data;
        
              // Set the token in localStorage
              localStorage.setItem("authToken", authToken);
              localStorage.setItem("userRole", userRole);
        
              // Optionally, you can redirect the user to another page or perform other actions
              // after successful registration and token storage
             window.location.href = "Index.html";
            } else {
              // Handle the error response if registration fails
              console.error("login failed:", response.statusText);
            }
          } catch (error) {
            console.error("An error occurred during login:", error);
          }
        }
            </script>


</body>
</html>
    